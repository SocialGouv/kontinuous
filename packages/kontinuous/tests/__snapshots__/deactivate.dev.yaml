// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`test build manifests with snapshots deactivate.dev 1`] = `
"apiVersion: batch/v1
kind: Job
metadata:
  name: job-test-deactivate-feature-branch-1-deactivate-delete-e4580t
  namespace: awesome-ci
  annotations:
    kapp.k14s.io/nonce: ''
    kapp.k14s.io/update-strategy: fallback-on-replace
    kapp.k14s.io/change-group: kontinuous/test-deactivate-feature-branch-1
    kapp.k14s.io/change-group.deactivate: kontinuous/deactivate.test-deactivate-feature-branch-1
    kapp.k14s.io/change-group.deactivate.delete-namespace: kontinuous/deactivate.delete-namespace.test-deactivate-feature-branch-1
    kapp.k14s.io/change-group.deactivate..delete-namespace: kontinuous/deactivate..delete-namespace.test-deactivate-feature-branch-1
    janitor/ttl: '1800'
    kapp.k14s.io/disable-original: ''
    kapp.k14s.io/create-strategy: fallback-on-update
spec:
  backoffLimit: 1
  activeDeadlineSeconds: 3600
  ttlSecondsAfterFinished: 1800
  template:
    metadata: {}
    spec:
      restartPolicy: Never
      initContainers:
        - name: degit-action
          image: harbor.fabrique.social.gouv.fr/sre/kontinuous/degit:v1
          command:
            - sh
            - '-c'
            - >-
              degit SocialGouv/kontinuous/plugins/fabrique/jobs/deactivate
              /action
          securityContext:
            runAsUser: 1000
            runAsGroup: 1000
            fsGroup: 1001
          volumeMounts:
            - name: action
              mountPath: /action
          resources:
            limits:
              cpu: 100m
              memory: 256Mi
            requests:
              cpu: 10m
              memory: 64Mi
      containers:
        - name: job
          image: bitnami/kubectl:latest
          imagePullPolicy: IfNotPresent
          envFrom:
            - secretRef:
                name: kubeconfig
          env:
            - name: NAMESPACE
              value: test-deactivate-feature-branch-1
          command:
            - /bin/bash
            - '-c'
            - |
              set -e
              mkdir -p /tmp/.kube
              echo \\"$KUBECONFIG\\" > /tmp/.kube/config
              export KUBECONFIG=/tmp/.kube/config

              kubectl delete namespace \\"$NAMESPACE\\"
          resources:
            limits:
              cpu: 500m
              memory: 512Mi
            requests:
              cpu: 100m
              memory: 128Mi
          securityContext:
            runAsUser: 1001
            runAsGroup: 1001
            fsGroup: 1001
          volumeMounts:
            - name: workspace
              mountPath: /workspace
            - name: action
              mountPath: /action
      volumes:
        - name: workspace
          emptyDir: {}
        - name: action
          emptyDir: {}
"
`;
